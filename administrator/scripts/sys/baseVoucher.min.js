var dateTime2Date=function(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))},baseVoucher=function(t,e,n,o,i){var r=this;i||(i={}),i.group="vouchers",r.defaultCondition4Search=i.defaultCondition4Search,r.prepareCondition4Search=i.onPrepareCondition4Search,r.watchMaster=i.onWatchMaster,r.defaultValues4Detail=i.onDefaultValues4Detail,r.watchDetail=i.onWatchDetail;var a=i.onLoading;i.onLoading=function(e,n){a&&a(e,n),e.find=function(){n.$modal.open({templateUrl:"templates/vouchers/"+t+"/templates/find.html",controller:["$scope","$modalInstance","parentScope",function(t,e,n){t.vcondition={},r.defaultCondition4Search&&(t.vcondition=r.defaultCondition4Search),t.list=n.list,t.search=n.search,t.okFind=function(){r.defaultCondition4Search=t.vcondition,r.prepareCondition4Search?n.condition=r.prepareCondition4Search(t,t.vcondition):(n.condition={},_.extend(n.condition,t.vcondition)),t.search(),e.close()},t.cancelFind=function(){e.dismiss("cancel")}}],size:"lg",resolve:{parentScope:function(){return e}}})}};var c=i.onEdit;i.onEdit=function(t,e){c&&c(t,e),t.data.details||(t.data.details=[]),t.round=0,t.$watch("data.ma_nt",function(e){e&&"VND"!=e&&(t.round=2)}),r.watchMaster&&r.watchMaster(t)};var l=i.onAdd;i.onAdd=function(t,e){l&&l(t,e),t.data.ty_gia=1,t.data.ma_nt="VND",t.data.ngay_ct=new Date,t.data.details=[],e.service.next(id_app,"so_ct").success(function(e){t.data.so_ct=e.so_ct}).error(function(t){console.log(t)}),t.round=0,t.$watch("data.ma_nt",function(e){e&&"VND"!=e&&(t.round=2)}),r.watchMaster&&r.watchMaster(t)},baseInput.call(this,t,e,n,o,i),r.module.directive(t+"DetailTable",function(){return{restrict:"E",scope:{ngMasterData:"="},templateUrl:"templates/vouchers/"+t+"/templates/detail-table.html",controller:["$scope","$modal","$timeout","$http","$window",function(e,n,o,i,a){e.status={isOpened:!1},e.$modal=n,e.$http=i,e.$window=a,e.isNotRowSelected=function(t){return 0==_.filter(t,function(t){return 1==t.sel}).length},e.deleteRow=function(t){var e=_.reject(t,function(t){return 1==t.sel});t.length=0;var n=0;e.forEach(function(e){e.line=n,t.push(e),n++})},e.addDetail=function(){var t=e.ngMasterData.details.length;e.dt_master=null,e.dt_current={line:t},r.defaultValues4Detail&&_.extend(e.dt_current,r.defaultValues4Detail),e.ngMasterData.details||(e.ngMasterData.details=[]),e.openDetail("lg")},e.editDetail=function(t){e.dt_master=_.find(e.ngMasterData.details,function(e){return e.line==t}),e.dt_current={},_.extend(e.dt_current,e.dt_master),e.openDetail("lg")},e.openDetail=function(i){var r=n.open({templateUrl:"templates/vouchers/"+t+"/templates/detail-edit.html",controller:["$scope","$modalInstance","parentScope",function(t,e,n){t.data=n.ngMasterData,t.status=n.status,t.dt_master=n.dt_master,t.dt_current=n.dt_current,t.updateDetail=function(){t.dt_master||(t.dt_master={},t.data.details.push(t.dt_master));for(var n in t.dt_current)t.dt_master[n]=t.dt_current[n];e.close()},t.cancelDetail=function(){e.dismiss("cancel")}}],size:i,resolve:{parentScope:function(){return e}}});r.opened.then(function(){o(function(){e.status.isOpened=!0},100)}),r.result.then(function(){e.status.isOpened=!1})}}],link:function(t){r.watchDetail&&r.watchDetail(t)}}})};baseVoucher.prototype=new baseInput;
//# sourceMappingURL=baseVoucher.min.js.map