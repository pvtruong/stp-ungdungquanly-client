var id_app,access_token,paths_not_require_id_app=["code","app","colleague","notification","message","profile","users","comment","versioninfo","admin"],accApp=angular.module("accApp",modulesD);accApp.config(["$provide","$httpProvider",function(e,n){var t=function(e){var n,t;window.getSelection?(n=window.getSelection(),n.getRangeAt&&n.rangeCount&&(t=n.getRangeAt(0),t.deleteContents(),t.insertNode(document.createTextNode(e)))):document.selection&&document.selection.createRange&&(document.selection.createRange().text=e)};e.decorator("taOptions",["taRegisterTool","$delegate",function(e,n){return e("insertName",{buttontext:"Tên",action:function(){return t("{{receiver.name}}")}}),e("insertAddress",{buttontext:"Email",action:function(){return t("{{receiver.address}}")}}),n.toolbar[1].push("insertName"),n.toolbar[1].push("insertAddress"),n}]),e.factory("myHttpInterceptor",["$q","$rootScope","$location",function(e,n,t){return{request:function(e){return e},requestError:function(n){return e.reject(n)},response:function(e){return e},responseEror:function(o){return 401===o.status?(n.isLogined=!1,t.url("/login")):(0==o.status||500==o.status)&&n.error("Không kết nối được với máy chủ"),e.reject(o)}}}]),n.interceptors.push("myHttpInterceptor")}]),accApp.constant("_",window._),accApp.constant("async",window.async),accApp.factory("api",["$http","$localStorage","$rootScope",function(e,n,t){return{init:function(o){o||(o=n.get("token")),o?(t.isLogined=!0,t.token=o):t.isLogined=!1,access_token=o,e.defaults.headers.common["X-Access-Token"]=o}}}]),accApp.run(["$rootScope","api","$window","user","app","$location","$http","appInfo","$timeout",function(e,n,t,o,i,r,c,a,s){e.isLogined=!1;var u=1,p=4,m="WINDOWS";if(e.program_name="ỨNG DỤNG QUẢN LÝ",e.program_version=u+"."+p,a.asDesktop()){var l=server_url+"/public/versioninfo?q={os:'"+m+"',app:'UDQL'}";c.get(l).success(function(e){if(e.length>0){var n=e[0];(u<n.major||u===n.major&&p<n.minor)&&confirm("Có một bản cập nhật cho chương trình này. Bạn có muốn tải về không?")&&t.open(n.url)}})}e.online=!0,t.addEventListener("offline",function(){e.$apply(function(){e.online=!1})},!1),t.addEventListener("online",function(){e.$apply(function(){e.online=!0})},!1),e.nextTick=function(e){s(e,0)},e.server_url=server_url,e.$watch("app_info",function(n){n&&(e.getTask(),e.crm_input_visible=!1,e.crm_report_visible=!1,e.acc_visible=!1,e.commands={},a.commands(e.id_app),e.members=[{email:e.app_info.user_created,name:e.app_info.user_created.split("@")[0]}],e.app_info.participants.forEach(function(n){e.members.push({email:n.email,name:n.name})}))},!0),e.$watch(function(){return r.path()},function(n){if(n=n.toLowerCase().split("/"),n.length<=1||"dashboard"==n[1]||""==n[1])e.menuActive="DASHBOARD";else{if(e.commands){var t=_.find(e.commands.modules,function(e){return e.path==n[1]});t&&(e.menuActive=t.group)}("login"==n[1]||"logout"==n[1])&&(e.messages_count=0,e.notifies_count=0,e.task_count=0)}}),e.$watch("commands",function(n){if(n){var t=r.path().toLowerCase().split("/");if(t.length<=1)e.menuActive="DASHBOARD";else{var o=_.find(e.commands.modules,function(e){return e.path==t[1]});o&&(e.menuActive=o.group)}}},!0),e.openPath=function(n,t){e.menuActive=t,r.url(n)},e.searchword="",e.searchAllKeyup=function(e,n){13===e.keyCode&&n&&r.url("search/"+n)},n.init(),Metronic.init(),Layout.init()}]);
//# sourceMappingURL=client.min.js.map