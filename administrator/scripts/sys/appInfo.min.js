var appInfoService=angular.module("appInfoService",[]);appInfoService.factory("appInfo",["$http","$localStorage","user","$rootScope","$location","app","$timeout",function(n,e,t,o,r,i){var a;return{asDesktop:function(){return"function"==typeof require?!0:!1},commands:function(t,r){n.get(server_url+"/api/"+t+"/menu").success(function(n){n.crm.input.forEach(function(n){n.visible&&(o.crm_input_visible=!0)}),n.sale.input.forEach(function(n){n.visible&&(o.sale_input_visible=!0)}),n.acc.forEach(function(n){n.visible&&(o.acc_visible=!0)}),n.report.forEach(function(n){n.visible&&(o.report_visible=!0)}),o.commands=n,e.setObject(t+"_menu_"+o.user.email,n),r&&r(null,n)}).error(function(n){console.error("Can't get menu of user",n),o.commands=e.getObject(t+"_menu_"+o.user.email),r&&r(n)})},get:function(e,t){if(a)t(null,a);else{var o=server_url+"/api/apps/"+e;n.get(o).success(function(n){a=n,t(null,a)}).error(function(n){t(n)})}},info:function(n,a){return id_app||(id_app=e.get("id_app"),id_app&&(o.id_app=id_app)),id_app||_.contains(paths_not_require_id_app,n)?(o.user?o.app_info||!id_app||_.contains(paths_not_require_id_app,n)?a&&a(null,o.user,o.app_info):i.get(id_app,id_app).success(function(n){o.app_info=n,a&&a(null,o.user,n)}).error(function(n){a&&a(n)}):t.getInfo(function(n,e){return n?void(a&&a(n)):void(!o.app_info&&id_app?i.get(id_app,id_app).success(function(n){o.app_info=n,a&&a(null,e,n)}).error(function(n){a&&a(n)}):a&&a(null,e,o.app_info))}),!0):(a&&a("Lỗi: bạn phải chọn một công ty"),r.url("/app"),!1)}}}]),appInfoService.factory("$localStorage",["$window","$cookies","$rootScope",function(n,e){return{remove:function(t){n.localStorage?n.localStorage[t]="":e[t]=""},set:function(t,o){n.localStorage?n.localStorage[t]=o:e[t]=o},get:function(t){return n.localStorage?n.localStorage[t]:e[t]},setObject:function(e,t){n.localStorage&&(n.localStorage[e]=JSON.stringify(t))},getObject:function(e){if(n.localStorage){var t=n.localStorage[e]||"[]";return JSON.parse(t)}return[]}}}]),appInfoService.factory("nodeWebkit",["$rootScope","$timeout",function(n,e){return{notification:function(t,o){if(Notification){var r={body:t};o||(o=n.program_name);var i=new Notification(o,r);i.onclick=function(){},i.onshow=function(){n.$apply(function(){e(function(){i.close()},5e3)})}}}}}]),appInfoService.factory("socket",["$rootScope",function(n){var e=server_url;e&&e.split(":").length<3&&(e+=":80");var t=io.connect(e);return{on:function(e,o){t.on(e,function(){var e=arguments;n.$apply(function(){o.apply(t,e)})})},once:function(e,o){t.once(e,function(){var e=arguments;n.$apply(function(){o.apply(t,e)})})},emit:function(e,o,r){t.emit(e,o,function(){var e=arguments;n.$apply(function(){r&&r.apply(t,e)})})}}}]),appInfoService.factory("Base64",function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e){var t,o,r,i,a,c="",u="",p="",s=0;do t=e.charCodeAt(s++),o=e.charCodeAt(s++),u=e.charCodeAt(s++),r=t>>2,i=(3&t)<<4|o>>4,a=(15&o)<<2|u>>6,p=63&u,isNaN(o)?a=p=64:isNaN(u)&&(p=64),c=c+n.charAt(r)+n.charAt(i)+n.charAt(a)+n.charAt(p),t=o=u="",r=i=a=p="";while(s<e.length);return c},decode:function(e){var t,o,r,i,a,c="",u="",p="",s=0,f=/[^A-Za-z0-9\+\/\=]/g;f.exec(e)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=n.indexOf(e.charAt(s++)),i=n.indexOf(e.charAt(s++)),a=n.indexOf(e.charAt(s++)),p=n.indexOf(e.charAt(s++)),t=r<<2|i>>4,o=(15&i)<<4|a>>2,u=(3&a)<<6|p,c+=String.fromCharCode(t),64!=a&&(c+=String.fromCharCode(o)),64!=p&&(c+=String.fromCharCode(u)),t=o=u="",r=i=a=p="";while(s<e.length);return c}}});
//# sourceMappingURL=appInfo.min.js.map